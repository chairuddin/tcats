	<?php	$hariini_long=date("Y-m-d H:i:s");	$kondisi=" AND is_deleted=0 ";		if($is_wali_kelas){	if(count($config_wali_kelas)>0) {		foreach($config_wali_kelas as $kelas) {			$sql_r[]=" FIND_IN_SET('$kelas',class) ";		}			}	} else {		if($_SESSION['s_level']==0){			$kondisi.=" AND quiz_id IN (SELECT id FROM quiz_master WHERE created_by='".$_SESSION['s_id']."')";		}	}	if(count($sql_r)>0) {		$kondisi.=" AND (".join(" or ",$sql_r).")";	}	$sql="SELECT id,token,allow_class,quiz_info,date_format(tanggal,'%Y-%m-%d-%H-%i') tanggal,date_format(tanggal_expired,'%Y-%m-%d-%H-%i') tanggal_expired FROM quiz_schedule 	WHERE '$hariini_long' BETWEEN DATE_ADD(tanggal, INTERVAL - 2 Month) AND DATE_ADD(tanggal_expired, INTERVAL + 1 Year) $kondisi	ORDER BY tanggal";	$q=$mysql->query($sql);	$r_data_awal=array();	if($q and $mysql->numrows($q)>0)	{		while($d=$mysql->assoc($q))		{		$id_jadwal=$d['id'];		$schedule_info=json_decode($d['quiz_info'],true);		list($y1,$m1,$d1,$h1,$i1)=explode("-",$d['tanggal']);		list($y2,$m2,$d2,$h2,$i2)=explode("-",$d['tanggal_expired']);		$d_allow_class=explode(",",$d['allow_class']);		$d['allow_class']=join(", ",$d_allow_class);		//(".$d['allow_class'].",".$schedule_info['duration']." Menit)		$url_jadwal=backendurl("quiz_schedule/info/".$d['id']);		$r_data_awal[]="		{			id:$id_jadwal,			title: '[".$d['token']."] ".$schedule_info['code']."',			start: new Date('$y1/$m1/$d1 $h1:$i1'),			end: new Date('$y2/$m2/$d2 $h2:$i2'),			url: '$url_jadwal',			allDay: false,			editable:false					}				";			/*		 url:'".backendurl("quiz_schedule/edit/".$id_jadwal)."'		 * */		}		 	}	?>  <div class="row">  <!-- /.col -->  <div class="col-md-12">	<div class="card card-primary">	  <div class="card-body p-15">		<!-- THE CALENDAR -->		<div id="calendar"></div>	  </div>	  <!-- /.card-body -->	</div>	<!-- /.card -->  </div>  <!-- /.col --></div><!-- /.row --><?php$data_awal=join(",",$r_data_awal);$style_css.=<<<END<style>.realtime-title-child {  display: block;  font-size: 12px;  font-weight: bold;  padding-top:5px;}.class_follow {  padding-left: 8px;}.hariinni-title-child {  display: block;  height:28px;  clear: both;}.hariinni-limit-child > span {  display: block;  width: 139px;}.allow_class {  margin-left: 8px;}.realtime_title {  margin-left: 8px;}.hariinni_title {  border-bottom: 1px solid hsl(0, 0%, 81%);  margin-bottom: 5px;  overflow: hidden;  padding: 3px;  text-overflow: ellipsis;  white-space: nowrap; }.hariinni-limit-child i {  margin-right: 2px;}.hariinni-limit-child {  padding: 2px;  margin-right: 4px;  display:block;}.realtime-limit-child {  background-color: hsl(209, 73%, 55%);  color: hsl(0, 0%, 100%);  display: inline-block;   padding:3px 5px 3px 3px;   margin-right:3px;}.realtime-limit-child i {  color: hsl(0, 0%, 100%);  display: inline-block;  text-align: center;  width: 23px;}.realtime-box {  border:1px solid #cecece;  margin-bottom: 15px;  padding: 15px;}.tiles.tiles-center{text-align:left !important;}.name.indikator{line-height:14px;}.tiles > li > a .name {  bottom: 0;  display: block;  float: left;  font-size: 11px !important;  left: 0;  padding: 3px 10px;  position: absolute;  right: 0;  text-align: left;}</style>END;$dashboard_url=backendurl("dashboard");$script_js.=<<<END<script>function realtime_ujian(){datapost="realtime_array="+$("#realtime_hidden").val();$.ajax({	type: 'POST',	url: '$dashboard_url/ajax/ujian_realtime',	data:datapost,	error: function() {	},	success: function(data) {		if(data!=1)	{			$("#ujian_realtime").html(data);		if($(".chart").length > 0)		{			$(".chart").each(function(){				var color = "#881302",				el = $(this);				var trackColor = el.attr("data-trackcolor");				if(el.attr('data-color'))				{					color = el.attr('data-color');				}				else				{					if(parseInt(el.attr("data-percent")) <= 25)					{						color = "#046114";					}					else if(parseInt(el.attr("data-percent")) > 25 && parseInt(el.attr("data-percent")) < 75)					{						color = "#dfc864";					}				}				/*				el.easyPieChart({					animate: 1000,					barColor: color,					lineWidth: 5,					size: 80,					lineCap: 'square',					trackColor: trackColor				});				*/			});					}				}	t = setTimeout("realtime_ujian()",7000);	}});}$(document).ready(function() {if($("#ujian_realtime").length > 0){	realtime_ujian();}}); $(function () {        /* initialize the calendar     -----------------------------------------------------------------*/    //Date for the calendar events (dummy data)    var date = new Date()    var d    = date.getDate(),        m    = date.getMonth(),        y    = date.getFullYear()    var Calendar = FullCalendar.Calendar;    var calendarEl = document.getElementById('calendar');    // initialize the external events    // -----------------------------------------------------------------      var calendar = new Calendar(calendarEl, {      plugins: [ 'bootstrap','dayGrid' ],      header    : {        left  : 'prev,next',        center: 'title',        right : ''      },      //Random default events      events    : [       $data_awal      ],          });    calendar.render();    // $('#calendar').fullCalendar()    /* ADDING EVENTS */       })</script>END;?>