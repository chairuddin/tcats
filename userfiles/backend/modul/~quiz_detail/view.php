<?php$col_back="<input type=\"button\" class=\"btn back\" onclick=\" window.location.href='".backendurl("quiz_master")."';\" value=\"Back\">";if($action=="add" OR $action=="edit"){		$_SESSION['s_folder_soal']=$_GET['id_soal'];	$_SESSION['s_folder_guru']=$mysql->get1value("SELECT username FROM user WHERE id IN(SELECT created_by FROM quiz_master WHERE id='".$_GET['id_soal']."')");}if($action=="edit"){$r=$mysql->query("SELECT * from $tabel where id=$id");$d=$mysql->assoc($r);$form = new Form("update{$modul}");$form->configure(array(	"prevent" => array("bootstrap", "jQuery", "focus"),	"action" =>backendurl("$modul/update?id_soal=$id_soal&essay=".$_GET['essay']),	"enctype" =>"multipart/form-data" ));if($_GET['essay']!=1){$form->addElement(new Element_HTML('<legend>'._MODULEDIT.'</legend>'));}else{$form->addElement(new Element_HTML('<legend>'._MODULEDITESSAY.'</legend>'));}/*if(file_exists("$small_pic/".$d['thumbnail']) and $d['thumbnail']!=''){$thumbimage="$small_url/".$d['thumbnail'];$form->addElement(new Element_HTML('<div><img src="'.$thumbimage.'" /></div>'));} $form->addElement(new Element_File(_THUMBNAIL, "filename"));*/ $form->addElement(new Element_Hidden("form", "update{$modul}"));$form->addElement(new Element_Hidden("id", "$id"));$form->addElement(new Element_TinyMCE("<span class=\"labelTANYA\">"._PERTANYAAN."</span>","question", array("required" => 1,"value"=>$d['question'],"class"=>"smalltiny")));if($_GET['essay']!=1){		$form->addElement(new Element_TinyMCE("<span class=\"labelA\">"._A."</span>","A", array("value"=>$d['A'],"class"=>"smalltiny")));		$form->addElement(new Element_TinyMCE("<span class=\"labelB\">"._B."</span>","B", array("value"=>$d['B'],"class"=>"smalltiny")));		$form->addElement(new Element_TinyMCE("<span class=\"labelC\">"._C."</span>","C", array("value"=>$d['C'],"class"=>"smalltiny")));		$form->addElement(new Element_TinyMCE("<span class=\"labelD\">"._D."</span>","D", array("value"=>$d['D'],"class"=>"smalltiny")));		$form->addElement(new Element_TinyMCE("<span class=\"labelE\">"._E."</span>","E", array("value"=>$d['E'],"class"=>"smalltiny")));		$select_model="		<select name='model' id='set_model'>		<option value=''>Pilih Model</option>		<option value='1' ".($d['model']=="1"?"selected='selected'":"").">Horizontal</option>		<option value='0' ".($d['model']=="0"?"selected='selected'":"").">Vertical</option>		</select>		";		$form->addElement(new Element_HTML('		<div class="control-group">		<label for="set_model" class="control-label">Pilih Model<span class="required">* </span></label>		<div class="controls">		'.$select_model.'		</div></div>'));		$select_jawaban="		<select name='answer' id='set_jawaban'>		<option value=''>Pilih jawaban</option>		<option value='A' ".($d['answer']=="A"?"selected='selected'":"").">A</option>		<option value='B' ".($d['answer']=="B"?"selected='selected'":"").">B</option>		<option value='C' ".($d['answer']=="C"?"selected='selected'":"").">C</option>		<option value='D' ".($d['answer']=="D"?"selected='selected'":"").">D</option>		<option value='E' ".($d['answer']=="E"?"selected='selected'":"").">E</option>		</select>		";		$form->addElement(new Element_HTML('		<div class="control-group">		<label for="set_jawaban" class="control-label">Kunci Jawaban<span class="required">* </span></label>		<div class="controls">		'.$select_jawaban.'		</div></div>'));}//$form->addElement(new Element_Textbox(_URL,"url", array("required" => 1,"value"=>$d['url'])));$form->addElement(new Element_Button(_SIMPAN));$form->addElement(new Element_Button(_BATAL, "button", array(	"onclick" => "history.go(-1);")));$form->render();}if($action=="add"){$col_back="<input type=\"button\" class=\"btn back\" onclick=\" window.location.href='".backendurl("quiz_detail/view/?id_soal=$id_soal")."';\" value=\"Back\">";	$form = new Form("{$modul}add");$form->configure(array(	"prevent" => array("bootstrap", "jQuery", "focus"),	"action" =>backendurl("$modul/save?id_soal=$id_soal&essay=".$_GET['essay']),	"enctype" =>"multipart/form-data" ));if($_GET['essay']!=1){	$form->addElement(new Element_HTML('<legend>'._MODULMASTERTAMBAH.'</legend>'));}else{
$form->addElement(new Element_HTML('<legend>'._MODULMASTERTAMBAHESSAY.'</legend>'));	
}$form->addElement(new Element_Hidden("form", "{$modul}add"));$form->addElement(new Element_TinyMCE("<span class=\"labelTANYA\">"._PERTANYAAN."</span>","question", array("required" => 1,"value"=>$d['question'],"class"=>"smalltiny")));if($_GET['essay']!=1){$form->addElement(new Element_TinyMCE("<span class=\"labelA\">"._A."</span>","A", array("value"=>$d['A'],"class"=>"smalltiny")));$form->addElement(new Element_TinyMCE("<span class=\"labelB\">"._B."</span>","B", array("value"=>$d['B'],"class"=>"smalltiny")));$form->addElement(new Element_TinyMCE("<span class=\"labelC\">"._C."</span>","C", array("value"=>$d['C'],"class"=>"smalltiny")));$form->addElement(new Element_TinyMCE("<span class=\"labelD\">"._D."</span>","D", array("value"=>$d['D'],"class"=>"smalltiny")));$form->addElement(new Element_TinyMCE("<span class=\"labelE\">"._E."</span>","E", array("value"=>$d['E'],"class"=>"smalltiny")));$select_model="<select name='model' id='set_model'><option value=''>Pilih Model</option><option value='1'  selected='selected'>Horizontal</option><option value='0'>Vertical</option></select>";$form->addElement(new Element_HTML('<div class="control-group"><label for="set_model" class="control-label">Pilih Model<span class="required">* </span></label><div class="controls">'.$select_model.'</div></div>'));$select_jawaban="<select name='answer' id='set_jawaban' required='required'><option value=''>Pilih jawaban</option><option value='A' ".($d['answer']=="A"?"selected='selected'":"").">A</option><option value='B' ".($d['answer']=="B"?"selected='selected'":"").">B</option><option value='C' ".($d['answer']=="C"?"selected='selected'":"").">C</option><option value='D' ".($d['answer']=="D"?"selected='selected'":"").">D</option><option value='E' ".($d['answer']=="E"?"selected='selected'":"").">E</option></select>";$form->addElement(new Element_HTML('<div class="control-group"><label for="set_jawaban" class="control-label">Kunci Jawaban<span class="required">* </span></label><div class="controls">'.$select_jawaban.'</div></div>'));}$form->addElement(new Element_Button(_SIMPAN));$form->addElement(new Element_Button(_BATAL, "button", array(	"onclick" => "history.go(-1);")));$form->render();}if($action=="" or $action=="search" or $action=="view"){//$form_search=form_search($keyword,"?id_soal=$id_soal");}if($action=="view" or $action=="" or $action=="search"){	//$col_tambah=button_add("$modul/add/?id_soal=$id_soal");$col_tambah.='<a href="'.backendurl("$modul/add/?id_soal=$id_soal").'" class="btn btn-primary"> (+) Pilihan Ganda</a>';$col_tambah.='&nbsp;&nbsp;&nbsp;<a href="'.backendurl("$modul/add/?id_soal=$id_soal&essay=1").'" class="btn btn-primary">(+) Essay</a>';$col_tambah.="&nbsp;&nbsp;&nbsp;<a class=\"btn btn-success\" href='".backendurl("quiz_upload_wordx/?id_soal=$id_soal")."'>(+) Template(Docx)</a>	  ";//$col_tambah.="<a class=\"printer\" target=\"_BLANK\"href='".backendurl("$modul/print/?id_soal=$id_soal&print=1")."'><img alt=\"Cetak\" border=\"0\" src=\"".backendurl("images/print.jpg")."\"></a>	  ";$sql="SELECT * FROM $modul  ";$sql.=" WHERE quiz_id='$id_soal' ";if($action=="search"){$sql.=" AND (question LIKE '%$keyword%' OR A LIKE '%$keyword%' OR B LIKE '%$keyword%' OR C LIKE '%$keyword%' OR D LIKE '%$keyword%' OR E LIKE '%$keyword%' ) ";}$r=$mysql->query($sql);$total_records = $mysql->numrows($r);$start = $screen * $max_page_list;$pages = ceil($total_records/$max_page_list);if ($pages>1) $col_pagination=pagination($screen,"?id_soal=$id_soal");$sql.="  order by $sort_by $sort_order  LIMIT $start, $max_page_list";$r=$mysql->query($sql);echo "<h3>SOAL PILIHAN GANDA</h3>";echo "<table id='DataTables_Table_3_wrapper' class='quiz_detail table table-hover table-nomargin table-bordered '>";echo "<thead><tr><th style=\"width:25px;\">No</th>";//<th>"._THUMBNAIL."</th>echo "<th>"._PERTANYAAN."</th>";echo "<th style=\"width:100px;\">Action</th></tr></thead>";$no=($start+1);if($mysql->numrows($r)>0){echo '<tbody id="brand_row" class="ui-sortable">';while($d=$mysql->assoc($r)){	echo "<tr id='list_{$d['id']}' class='rowmove'><td>$no</td>";/*$thumbnail_url="$small_url/".$d['thumbnail'];$thumbnail_path="$small_pic/".$d['thumbnail'];if(file_exists("$thumbnail_path")){echo "<th class='brand_thumbnail'><img src='".$thumbnail_url."'/></th>";}else{echo "<th>&nbsp;</th>";}*/echo "<td>".$d["question"]."<br/>";$option_pilihan="";if(strip_tags($d["A"])!="-"){$option_pilihan.= "<li><span class='point_jawaban ".($d["answer"]=="A"?"jawaban":"")."'>A</span><span class='hasil_jawaban'>".$d["A"]."</span></li>";}if(strip_tags($d["B"])!="-"){$option_pilihan.= "<li><span class='point_jawaban ".($d["answer"]=="B"?"jawaban":"")."'>B</span><span class='hasil_jawaban'>".$d["B"]."</span></li>";}if(strip_tags($d["C"])!="-"){$option_pilihan.= "<li><span class='point_jawaban ".($d["answer"]=="C"?"jawaban":"")."'>C</span><span class='hasil_jawaban'>".$d["C"]."</span></li>";}if(strip_tags($d["D"])!="-"){$option_pilihan.= "<li><span class='point_jawaban ".($d["answer"]=="D"?"jawaban":"")."'>D</span><span class='hasil_jawaban'>".$d["D"]."</span></li>";}if(strip_tags($d["E"])!="-"){$option_pilihan.= "<li><span class='point_jawaban ".($d["answer"]=="E"?"jawaban":"")."'>E</span><span class='hasil_jawaban'>".$d["E"]."</span></li>";}if($option_pilihan!=""){echo "Pilihan Jawaban<ul class='pilihan_jawaban'>";echo "$option_pilihan";echo "</ul>";}echo "</td>";/*echo "<th>".$d["A"]."</th>";echo "<th>".$d["B"]."</th>";echo "<th>".$d["C"]."</th>";echo "<th>".$d["D"]."</th>";echo "<th>".$d["E"]."</th>";echo "<th>".$d["answer"]."</th>";* */$ar_action=array("edit"=>$d['id']."?id_soal=$id_soal","del"=>$d['id']."?id_soal=$id_soal");echo "<td>".button_action($ar_action)."</td></tr>";$no++;}echo "</tbody>";}echo "</table>";echo "<h3>SOAL ESSAY</h3>";////////SOAL ESSAY$sql="SELECT * FROM quiz_essay  ";$sql.=" WHERE quiz_id='$id_soal' ";if($action=="search"){$sql.=" AND (question LIKE '%$keyword%' OR A LIKE '%$keyword%' OR B LIKE '%$keyword%' OR C LIKE '%$keyword%' OR D LIKE '%$keyword%' OR E LIKE '%$keyword%' ) ";}$r=$mysql->query($sql);$total_records = $mysql->numrows($r);$start = $screen * $max_page_list;$pages = ceil($total_records/$max_page_list);if ($pages>1) $col_pagination=pagination($screen,"?id_soal=$id_soal");$sql.="  order by $sort_by $sort_order  LIMIT $start, $max_page_list";$r=$mysql->query($sql);echo "<table id='DataTables_Table_3_wrapper' class='quiz_detail table table-hover table-nomargin table-bordered '>";echo "<thead><tr><th  style=\"width:25px;\">No</th>";//<th>"._THUMBNAIL."</th>echo "<th>"._PERTANYAAN."</th>";echo "<th style=\"width:100px;\">Action</th></tr></thead>";$no=($start+1);if($mysql->numrows($r)>0){echo '<tbody id="brand_row" class="ui-sortable">';while($d=$mysql->assoc($r)){	echo "<tr id='list_{$d['id']}' class='rowmove'><td>$no</td>";/*$thumbnail_url="$small_url/".$d['thumbnail'];$thumbnail_path="$small_pic/".$d['thumbnail'];if(file_exists("$thumbnail_path")){echo "<th class='brand_thumbnail'><img src='".$thumbnail_url."'/></th>";}else{echo "<th>&nbsp;</th>";}*/echo "<td>".$d["question"]."</td>";/*echo "<th>".$d["A"]."</th>";echo "<th>".$d["B"]."</th>";echo "<th>".$d["C"]."</th>";echo "<th>".$d["D"]."</th>";echo "<th>".$d["E"]."</th>";echo "<th>".$d["answer"]."</th>";* */$ar_action=array("edit"=>$d['id']."?id_soal=$id_soal&essay=1","del"=>$d['id']."?id_soal=$id_soal&essay=1");echo "<td>".button_action($ar_action)."</td></tr>";$no++;}echo "</tbody>";}echo "</table>";}if($action=="print"){	$sql="SELECT * FROM quiz_master  ";$sql.=" WHERE id='$id_soal' ";list($soal)=$mysql->query_data($sql);$sql="SELECT * FROM $modul  ";$sql.=" WHERE quiz_id='$id_soal' ";if($action=="search"){$sql.=" AND (question LIKE '%$keyword%' OR A LIKE '%$keyword%' OR B LIKE '%$keyword%' OR C LIKE '%$keyword%' OR D LIKE '%$keyword%' OR E LIKE '%$keyword%' ) ";}$r=$mysql->query($sql);$total_records = $mysql->numrows($r);$start = $screen * $max_page_list;$pages = ceil($total_records/$max_page_list);if ($pages>1) $col_pagination=pagination($screen,"?id_soal=$id_soal");$sql.="  order by $sort_by $sort_order  LIMIT $start, $max_page_list";$r=$mysql->query($sql);ob_start();echo "<div><table class='table table-hover table-nomargin table-bordered '  cellspacing=0 cellpadding=5><tr><td>Kode</td><td>:</td><td>".$soal['code']."</td></tr><tr><td>Judul</td><td>:</td><td>".$soal['title_id']."</td></tr><tr><td>KKM</td><td>:</td><td>".$soal['kkm']."</td></tr><tr><td>Durasi</td><td>:</td><td>".$soal['duration']." Menit</td></tr></table></div><br><br><br>";echo "<table id='printsoal' border=0 class='view-table table table-hover table-nomargin  '>";$no=($start+1);if($mysql->numrows($r)>0){echo '<tbody id="brand_row" class="ui-sortable">';while($d=$mysql->assoc($r)){	echo "<tr id='list_{$d['id']}' class='rowmove'><td>$no</td>";/*$thumbnail_url="$small_url/".$d['thumbnail'];$thumbnail_path="$small_pic/".$d['thumbnail'];if(file_exists("$thumbnail_path")){echo "<th class='brand_thumbnail'><img src='".$thumbnail_url."'/></th>";}else{echo "<th>&nbsp;</th>";}*/echo "<td>".$d["question"]."<br/>Pilihan Jawaban<ul class='pilihan_jawaban'>";if(strip_tags($d["A"])!="-"){echo "<li><span class='point_jawaban ".($d["answer"]=="A"?"jawaban":"")."'>A</span><span class='hasil_jawaban'>".$d["A"]."</span></li>";}if(strip_tags($d["B"])!="-"){echo "<li><span class='point_jawaban ".($d["answer"]=="B"?"jawaban":"")."'>B</span><span class='hasil_jawaban'>".$d["B"]."</span></li>";}if(strip_tags($d["C"])!="-"){echo "<li><span class='point_jawaban ".($d["answer"]=="C"?"jawaban":"")."'>C</span><span class='hasil_jawaban'>".$d["C"]."</span></li>";}if(strip_tags($d["D"])!="-"){echo "<li><span class='point_jawaban ".($d["answer"]=="D"?"jawaban":"")."'>D</span><span class='hasil_jawaban'>".$d["D"]."</span></li>";}if(strip_tags($d["E"])!="-"){echo "<li><span class='point_jawaban ".($d["answer"]=="E"?"jawaban":"")."'>E</span><span class='hasil_jawaban'>".$d["E"]."</span></li>";}	echo "</ul></td>";echo "</tr>";$no++;}echo "</tbody>";}echo "</table>";$html=ob_get_clean();echo $html;/*VsWord::autoLoad();	$doc = new VsWord();  $parser = new HtmlParser($doc);  $parser->parse($html);    echo '<pre>'.($doc->getDocument()->getBody()->look()).'</pre>';$doc->saveAs('tinymce.docx'); exit();*/ }?>