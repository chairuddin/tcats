<?php$hariini_long=date("Y-m-d H:i:s");if($action=="save"){	if(Form::isValid("reguser",false) and $_POST['form']=='reguser') 	{  	$title_id=cleanInput($_POST['title_id']);	$uniqid=uniqid();	$sql="INSERT INTO $modul(title_id,created_by,created_date,uniqid) values ('$title_id','".$_SESSION['s_id']."','$hariini_long','$uniqid')";	$r=$mysql->query($sql);	if($r)	{				if($_POST['tambah_jadwal']==1){		Form::clearValues("reguser"); 		$tryout_id=$mysql->get1value("SELECT id FROM $modul WHERE uniqid='$uniqid'");		header("location:".backendurl("quiz_schedule/add/?tryout_id=$tryout_id"));		exit();		}		msg_warning(_BERHASILUPDATEUSER,"success");		header("location:".backendurl("$modul/view"));		exit();	}		}	else	{		$action="add";	}	}if($action=="update"){	$id=cleanInput($_POST['id'],'numeric');	if(Form::isValid("updateuser",false) and $_POST['form']=='updateuser') 	{  	$title_id=cleanInput($_POST['title_id']);		$r_update=array();				$status=cleanInput($_POST['status'],"numeric");		$sql="UPDATE $modul set ";	$r_update[]="title_id='$title_id'";	$r_update[]="modified_date='$hariini_long'";	$r_update[]="modified_by=".$_SESSION['s_id'];		$sql.=join(",",$r_update);	$sql.=" WHERE id=$id";	$r=$mysql->query($sql);	if($r)	{	Form::clearValues("updateuser"); 	msg_warning(_BERHASILUPDATEUSER,"success");	header("location:".backendurl("$modul/view"));	exit();	}	else	{	msg_warning(_GAGALUPDATEUSER,"success");	header("location:".backendurl("$modul/edit/$id"));	exit();	}		}	else	{	msg_warning(_GAGALUPDATEUSER,"success");	header("location:".backendurl("$modul/edit/$id"));	exit();	}}if($action=="del"){	if($_SESSION['s_level']<=0){redirecto(_TIDAKBERHAK,"error","view");}	$r=$mysql->query("SELECT * from $modul where id=$id");	$d=$mysql->assoc($r);if($_SESSION['s_level']<$d['level']){redirecto(_TIDAKBERHAK,"error","view");}	$sql="DELETE FROM $modul WHERE id=$id";	$r=$mysql->query($sql);	if($r)	{		$sql="DELETE FROM quiz_schedule WHERE tryout_id=$id";		$r=$mysql->query($sql);		header("location:".backendurl("$modul/view"));	}}?>