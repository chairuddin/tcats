<?php/*Catatan pakai yona-validation:Form :	Form menggunakan class yona-validation	Tombol submit name=submitVar  : nama element harus sama dengan var   * */$hari_ini=date("Y-m-d H:i:s");$admin_id=$_SESSION['s_id'];		$validation->set_validation(array('var'=>'id_user',''=>'Pilih Guru'))->required();$validation->generate_js_validation();if($action=="update") {	$id=$_POST['id'];	list($dd,$mm,$yy) = explode('/',$_POST['tanggal']);	$_POST['tanggal']="$yy-$mm-$dd";		if($validation->valid()){		$r_post=array(		'id_user',		);				$sql_new = array();		$sql_update = array();				$sql_r[]="class='$id'";		$sql_new[]="created_by='$admin_id'";		$sql_new[]="created_date='$hari_ini'";					$sql_update[]="modified_by='$admin_id'";		$sql_update[]="modified_date='$hari_ini'";							foreach($r_post as $i => $v) {			if($v!='content') {				$post=cleanInput($_POST[$v]);			} else {				$post=$_POST[$v];			}			$sql_r[]="$v = '".addslashes($post)."'";		}		$sql_insert_join = array_merge($sql_r,$sql_new); 		$sql_update_join = array_merge($sql_r,$sql_update);		$sql=" INSERT INTO quiz_wali_kelas SET ".join(" ,",$sql_insert_join)." ON DUPLICATE KEY UPDATE ".join(" ,",$sql_update_join);		$q=$mysql->query($sql);							} else {		sweetalert2($type="warning",$msg=($action=="update"?"Update":"Tambah")." Wali Kelas gagal, data tidak valid",backendurl("$modul".($action=="update"?"/edit/$id":"/add")));	}		if($q){		sweetalert2($type="success",$msg=($action=="update"?"Update":"Tambah")." Wali Kelas berhasil",backendurl("$modul"));	} else {		sweetalert2($type="warning",$msg=($action=="update"?"Update":"Tambah")." Wali Kelas gagal. ",backendurl("$modul".($action=="update"?"/edit/$id":"/add")));	}	}