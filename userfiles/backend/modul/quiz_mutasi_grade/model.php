<?php/*Catatan pakai yona-validation:Form :	Form menggunakan class yona-validation	Tombol submit name=submitVar  : nama element harus sama dengan var   * */$hari_ini=date("Y-m-d H:i:s");$admin_id=$_SESSION['s_id'];		//$validation->set_validation(array('var'=>'grade[]',''=>'Grade'))->required();//$validation->generate_js_validation();if($action=="update") {	$valid=true;	$mysql->autocommit(false);	$id=$_POST['id'];	list($dd,$mm,$yy) = explode('/',$_POST['tanggal']);	$_POST['tanggal']="$yy-$mm-$dd";		if(count($_POST['grade'])>0) {		foreach($_POST['grade'] as $id_member => $grade) {			$q=$mysql->query("UPDATE quiz_member SET grade='$grade' WHERE id=$id_member ");			if(!$q) {				$valid=false;			}			if($mysql->affected_rows($q)>0) {				$q=$mysql->query("INSERT INTO quiz_grade_log SET member_id='$id_member',grade='$grade',created_by='$admin_id',created_date='$hari_ini' ");			}		}	}			if($valid){		$mysql->commit();		$mysql->autocommit(true);		sweetalert2($type="success",$msg=($action=="update"?"Update":"Tambah")." Grade berhasil",backendurl("$modul"));	} else {		$mysql->rollback();		sweetalert2($type="warning",$msg=($action=="update"?"Update":"Tambah")." Grade gagal. ",backendurl("$modul".($action=="update"?"/edit/$id":"/add")));	}	}