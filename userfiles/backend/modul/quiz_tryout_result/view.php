<?phpif($action=="view_participant"){	$id=cleanInput($id);//generate field tambahan	$join_field="";$nama_field=array();$field_tambahan=array();$qfield_tambahan=$mysql->query("SELECT id,quiz_info FROM quiz_schedule WHERE tryout_id=".cleanInput($_GET['tryout_id']));if($qfield_tambahan and $mysql->numrows($qfield_tambahan)>0){	while($dfield_tambahan=$mysql->assoc($qfield_tambahan)){	$r_field_tambahan=json_decode($dfield_tambahan['quiz_info'],true);	$field_tambahan[]="(SELECT score FROM quiz_done WHERE member_id=q.member_id AND schedule_id='".$dfield_tambahan['id']."') '".$r_field_tambahan['code']."'";	$nama_field[]=$r_field_tambahan['code'];	}	if(count($field_tambahan)>0){	$join_field=",".join(", ",$field_tambahan);	}}//END generate field tambahan	$tryout_title=$mysql->get1value("SELECT title_id FROM quiz_tryout WHERE id='".cleanInput($_GET['tryout_id'])."' ");$sql="SELECT * FROM (SELECT q.member_id,q.member_code,q.member_fullname,m.class,m.jurusan,m.ruang,sum(q.score) total_skor,count(q.id) jumlah_ujian$join_field FROM quiz_done q LEFT JOIN quiz_member m ON (q.member_id=m.id)WHERE q.is_done=1 AND q.schedule_id IN(select id FROM quiz_schedule WHERE tryout_id=".$_GET['tryout_id'].")GROUP BY q.member_id) aORDER BY a.total_skor DESC";$r=$mysql->query($sql);$total_records = $mysql->numrows($r);$start = $screen * $max_page_list;$pages = ceil($total_records/$max_page_list);if ($pages>1) $col_pagination=pagination($screen,"?tryout_id=".$_GET['tryout_id']."&class=".$_GET['class']);if($_GET['print']!=1){$sql.="  LIMIT $start, $max_page_list";}$r=$mysql->query($sql);echo "<h4>".$tryout_title."</h4>";echo "<table id='DataTables_Table_3_wrapper' class='participant-table table table-hover table-nomargin table-bordered '>";echo "<thead><tr><th>No</th><th>"._KODELOGIN."</th><th>"._NAMALENGKAP."</th><th>"._CLASS."</th><th>"._JURUSAN."</th><th>"._RUANG."</th><th>"._JMLUJIAN."</th>";if(count($nama_field)>0){	foreach($nama_field as $i =>$v){		echo "<th>".$v."</th>";	}}echo "<th>"._SCORE."</th>";/*<th>"._NAMASOAL."</th><th>"._UJIANMULAI."</th><th>"._B."</th><th>"._S."</th>  * */if($_SESSION['s_level']>0 and $_GET['print']!=1){echo "<th>Batalkan</th>";}echo "</tr></thead>";$no=($start+1);echo '<tbody>';while($d=$mysql->assoc($r)){echo "<tr><td>$no</td><td>".$d['member_code']."</td><td>".$d['member_fullname']."</td><td>".$d['class']."</td><td>".$d['jurusan']."</td><td>".$d['ruang']."</td><td>".$d['jumlah_ujian']."</td>";if(count($nama_field)>0){	foreach($nama_field as $i =>$v){		echo "<td>".$d[$v]."</td>";	}}echo "<td>".$d['total_skor']."</td>";if($_SESSION['s_level']>0 and $_GET['print']!=1){echo "<td>	<a title=\"del\" class=\"button_action action_del action-remove\" href=\"".backendurl("$modul/del_participant/".$d['id'])."\" data-toggle=\"modal\">		<i class=\"glyphicon-remove\"></i>	</a></td>";}$no++;echo "</tr>";}echo "</tbody>";echo "</table>";}else{header("location:".backendurl("quiz_tryout"));exit();}?>