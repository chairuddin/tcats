<?phpif($action=="") {    //periode data ujian    $request_date1=$_REQUEST['date1']=$_REQUEST['date1']==""?date("01/m/Y"):$_REQUEST['date1'];    $request_date2=$_REQUEST['date2']=$_REQUEST['date2']==""?date("d/m/Y"):$_REQUEST['date2'];       list($xd,$xm,$xy)=explode("/",$_REQUEST['date1']);	$date1="$xy-$xm-$xd";		list($xd,$xm,$xy)=explode("/",$_REQUEST['date2']);	$date2="$xy-$xm-$xd";	      $periode_data_ujian=$mysql->sql_get_assoc("SELECT quiz_title_id,count(id) jumlah,quiz_id  FROM app_quiz_done WHERE date_format(start_time,'%Y-%m-%d') BETWEEN '$date1' AND '$date2' GROUP BY quiz_id ");        //10 ujian terakhir    $data_ujian=$mysql->sql_get_assoc("SELECT * FROM app_quiz_done ORDER BY id DESC limit 10  ");}if($action=="data") {		$category_id=$_GET['category_id'];		$column_order = array('a.id','a.title','c.title');	$column_search = array('a.title','c.title','m.fullname','m.email','m.wa');	$order = array('a.id' => 'DESC');	$is_paid=$_GET['is_paid']=='unpaid'?'0':'1';	if(isset($_POST['order'])) { // here order processing		$order_by = " ORDER BY {$column_order[$_POST['order']['0']['column']]} {$_POST['order']['0']['dir']}";	} else {		$order = $order;				$order_by = " ORDER BY id DESC ";	}	if ($_POST['length'] != -1 AND $_POST['length']!="") {		$where_limit = "LIMIT {$_POST['start']}, {$_POST['length']}";	}	$i = 0;	$sql_search=array();	foreach ($column_search as $item) { // loop column 				if($_POST['search']['value']) { // if datatable send POST for search						$sql_search[]= " $item LIKE '%{$_POST['search']['value']}%' ";		}		$i++;	}		if(count($sql_search)>0){	$sql_r[]=" ".join(" OR ",$sql_search)." ";	}		$sql=" 	SELECT 		a.id,		a.title,        a.created_date,		a.total,		a.category_id,		c.title category,		a.is_paid,        a.time_limit,        m.fullname,m.email	FROM 		app_order a	LEFT JOIN app_category c ON c.id=category_id    LEFT JOIN quiz_member m ON m.id=a.member_id		";		$sql.=" WHERE 1=1 AND a.is_paid='$is_paid' ";	if(count($sql_r)>0){		$sql.=" AND  (".join(" OR ",$sql_r).") ";	}		$result_total = $mysql->query($sql);	$total=$mysql->num_rows($result_total);	$sql .= " $order_by $where_limit";		$result = $mysql->query($sql);		$data = array();		$gotopage = $_POST['start']/$_POST['length'];	$no = $_POST['start'];	while($d = $mysql->fetch_assoc($result)) {		$no++;		$row = array();				$row[]=$no;        $row[]=$d['created_date'];        $row[]=$d['fullname'];        $row[]=$d['title'];		$row[]=$d['category'];        $row[]=$d['is_paid']==0?'<span  class="badge badge-danger">Belum bayar</span>':'<span class="badge badge-success">Lunas</span>';		$row[]=currency($d['total']);        $row[]=$d['time_limit']==0?'Unlimited':$d['time_limit'].' Bulan';		        		$action_edit='<a class="btn btn-success" href="'.backendurl("$modul/edit/".$d['id']).'"><i class="fas fa-check" aria-hidden="true"></i></a>';		$action_delete='<a class="btn btn-danger"  title="Hapus order"				data-toggle="modal" 				data-target="#modal-default" 				data-title="Hapus data" 				data-body="Apakah anda yakin ingin menghapus data ini?"				data-btn2=""				data-btn2name=""				data-btn1="'.backendurl("$modul/del/".$d['id']).'"				data-btn1name="Hapus"				>				<i class="fas fa-trash"></i>		</a>';				$row[]='<div class="btn-group">'.$action_info.$action_edit.$action_delete.'</div>';				$data[] = $row;	}			$output = array(		"draw" => $_POST['draw'],		"recordsTotal" => $total,		"recordsFiltered" => $total,		"data" => $data	);	die(json_encode($output));}?>