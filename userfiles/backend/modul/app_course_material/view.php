<?phpif($action=="add" OR $action=="edit"){if($action=='edit') {	$q=$mysql->query("	SELECT 		id,		title,		content,		video_url,		video_embed_url,		quiz_id,        type	FROM		app_course_material WHERE id=$id	");	$d=$mysql->assoc($q);		foreach($d as $field => $value) {		$_POST[$field]=$_POST[$field]==''?$value:$_POST[$field];	}	}$do_action=backendurl("$modul/".($action=="add"?"save":"update"));$label_action=$action=="add"?"Tambah":"Edit";$option_soal=[];$q=$mysql->query("SELECT id,concat(code,' ',title_id) title_id FROM quiz_master $kondisi2 ORDER BY code,title_id ");if($q and $mysql->num_rows($q)>0) {	while($d=$mysql->fetch_assoc($q)) {		$option_soal[$d['id']]=$d['title_id'];	}}$option_type['text']='Text';$option_type['video']='Video';$option_type['quiz']='Quiz';    $form_course_sub_id=$form->element_Hidden("course_sub_id",$_GET['course_sub_id']);$form_title=$form->element_Textbox("Judul","title");$form_type=$form->element_Select("Jenis",'type',$option_type);$form_content=$form->element_Textarea("Isi","content",array('class'=>'usetiny'));//$form_video_name=$form->element_File("Upload Video","video_name");$form_video_url=$form->element_Textbox("Video Youtube Url ","video_url");$form_video_embed_url=$form->element_Textarea("Video Embed Url ","video_embed_url");$form_quiz_id=$form->element_Select("Pilih Soal",'quiz_id',$option_soal,array('class'=>'select2'));echo <<<END  <div class="card card-navy">              <div class="card-header">                <h3 class="card-title">$label_action $course_title</h3>              </div>              <!-- /.card-header -->              <!-- form start -->              <form role="form" method="POST" id="form-member"  class="form-member yona-validation" action="$do_action"  novalidate enctype="multipart/form-data">				<input type="hidden" name="id" value="$id" />                <div class="card-body">					$form_course_sub_id                    <div class="form-group">                    $form_title                                  </div>                  <div class="form-group">                    $form_type                  </div>                  <div class="form-group">                    $form_content                                      </div>                  <!--                  <div class="form-group">                    $form_video_name                                 </div>                  -->                  <div class="form-group">                    $form_video_url                                      </div>                  <div class="form-group">                    $form_video_embed_url                                      </div>                  <div class="form-group">                    $form_quiz_id                                      </div>                <div class="card-footer">                   <button type="button" class="btn btn-default" onclick="history.back(-1);">Batal</button>&nbsp;&nbsp;&nbsp;<button type="submit" name="submit" value="1" class="btn btn-primary">Submit</button>                </div>              </form>            </div>            <!-- /.card -->END;}if($action=="view" or $action==""){$btn_tambah=button_add("$modul/add?course_sub_id=".$_GET['course_sub_id']);echo <<<END<div class="card card-navy">		<div class="card-header">		  <h3 class="card-title">Sub Course $course_title</h3>		  <div class="float-right">$btn_tambah</div>		</div>		<!-- /.card-header -->		<div class="card-body">				<table id="datalist" class="table table-bordered table-striped responsive no-wrap">				<thead>				<tr>				<th style="width:40px;">No</th>				<th>Judul</th>				<th style="width:80px;">Action</th>				</tr>				</thead>				</table>		</div>		<!-- /.card-body -->	  </div></div>END;}if($action=="data") {		$column_order = array('a.id','a.title','c.title');	$column_search = array('a.title','c.title');	$order = array('id' => 'DESC');		if(isset($_POST['order'])) { // here order processing		$order_by = " ORDER BY {$column_order[$_POST['order']['0']['column']]} {$_POST['order']['0']['dir']}";	} else {		$order = $order;				$order_by = " ORDER BY id DESC ";	}	if ($_POST['length'] != -1 AND $_POST['length']!="") {		$where_limit = "LIMIT {$_POST['start']}, {$_POST['length']}";	}	$i = 0;	$sql_search=array();	foreach ($column_search as $item) { // loop column 				if($_POST['search']['value']) { // if datatable send POST for search						$sql_search[]= " $item LIKE '%{$_POST['search']['value']}%' ";		}		$i++;	}		if(count($sql_search)>0){	$sql_r[]=" ".join(" OR ",$sql_search)." ";	}		$sql=" 	SELECT 		a.id,		a.title,		a.content	FROM 		app_course_material a		";		$sql.=" WHERE a.course_sub_id=".$_GET['course_sub_id']." ";	if(count($sql_r)>0){		$sql.=" AND  (".join(" OR ",$sql_r).") ";	}		$result_total = $mysql->query($sql);	$total=$mysql->num_rows($result_total);	$sql .= " $order_by $where_limit";		$result = $mysql->query($sql);		$data = array();		$gotopage = $_POST['start']/$_POST['length'];	$no = $_POST['start'];	while($d = $mysql->fetch_assoc($result)) {		$no++;		$row = array();				$row[]=$no;		$row[]=$d['title'];		$action_edit=btn_edit(backendurl("$modul/edit/".$d['id']."?course_sub_id=".$_GET['course_sub_id']));		$action_delete=btn_delete(backendurl("$modul/del/".$d['id']."?course_sub_id=".$_GET['course_sub_id']));		/*		$action_edit='<a href="'.backendurl("$modul/edit/".$d['id']).'"><i class="fas fa-edit" aria-hidden="true"></i></a>&nbsp;&nbsp;&nbsp;&nbsp;';		$action_delete='<a class=""  title="Hapus buku"				data-toggle="modal" 				data-target="#modal-default" 				data-title="Hapus data" 				data-body="Apakah anda yakin ingin menghapus data ini?"				data-btn2=""				data-btn2name=""				data-btn1="'.backendurl("$modul/del/".$d['id']).'"				data-btn1name="Hapus"				>				<i class="fas fa-trash"></i>		</a>';		*/		$row[]='<div class="btn-group btn-group-sm">'.$action_info.$action_edit.$action_delete.'</div>';				$data[] = $row;	}			$output = array(		"draw" => $_POST['draw'],		"recordsTotal" => $total,		"recordsFiltered" => $total,		"data" => $data	);	die(json_encode($output));}?>